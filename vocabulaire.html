<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <title>Vocabulaire Anglais</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Inclure Firebase en mode compatibilit√© (pas d‚Äôerreur import/export) -->
    <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-database-compat.js"></script>
</head>

<body class="vocabulaire-page">
    <nav>
        <ul>
            <li><a href="homePage.html">Accueil</a></li>
            <li><a href="vocabulaire.html">Vocabulaire</a></li>
            <li><a href="quiz.html">Quiz</a></li>
        </ul>
    </nav>

    <h1>üìö Vocabulaire</h1>

    <table>
        <thead>
            <tr>
                <th>Anglais</th>
                <th>Fran√ßais</th>
                <th>Exemple</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="tableBody">
        </tbody>
    </table>

    <h2>‚ûï Ajouter un mot</h2>
    <form id="addWordForm">
        <input type="text" id="english" placeholder="Mot en anglais" required />
        <input type="text" id="french" placeholder="Traduction en fran√ßais" required />
        <input type="text" id="example" placeholder="Phrase d'exemple" required />
        <button type="submit">Ajouter</button>
    </form>

    <a href="index.html">‚¨ÖÔ∏è Retour √† l'accueil</a>

    <script>
        // Configuration Firebase (idem que dans ta console Firebase)
        const firebaseConfig = {
            apiKey: "AIzaSyCMUDjFISW_6u0t9GdMLx3lvdC9k7-MDZA",
            authDomain: "english-project-272a8.firebaseapp.com",
            databaseURL: "https://english-project-272a8-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "english-project-272a8",
            storageBucket: "english-project-272a8.appspot.com",
            messagingSenderId: "248230850925",
            appId: "1:248230850925:web:574e9d6a1f4df889991d1c",
            measurementId: "G-09D2ED5K0X"
        };

        // Initialiser Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const form = document.getElementById('addWordForm');
        const tableBody = document.getElementById('tableBody');

        // Afficher les mots depuis Firebase
        function displayWords() {
            db.ref("words").on("value", snapshot => {
                tableBody.innerHTML = '';
                const data = snapshot.val();
                if (!data) return;

                Object.keys(data).forEach(key => {
                    const word = data[key];
                    const row = document.createElement('tr');
                    row.innerHTML = `
                    <td>${word.english}</td>
                        <td>${word.french}</td>
                        <td>${word.example}</td>
                        <td>
                            <button class="speak-btn" data-word="${word.english}">üîä</button>
                            <button class="delete-btn" data-id="${key}">Supprimer</button>
                        </td>
                    `;

                    tableBody.appendChild(row);
                });
            });
        }

        // Ajouter un mot
        form.addEventListener('submit', e => {
            e.preventDefault();

            const english = document.getElementById('english').value.trim();
            const french = document.getElementById('french').value.trim();
            const example = document.getElementById('example').value.trim();

            if (!english || !french || !example) {
                alert('Tous les champs sont requis !');
                return;
            }

            db.ref('words').push({ english, french, example });
            form.reset();
        });

        // Supprimer un mot
        tableBody.addEventListener('click', e => {
            if (e.target.classList.contains('delete-btn')) {
                const id = e.target.getAttribute('data-id');
                db.ref('words/' + id).remove();
            }
        });

        // Charger au d√©part
        displayWords();

        // Prononcer le mot en anglais
        tableBody.addEventListener('click', e => {
            if (e.target.classList.contains('speak-btn')) {
                const word = e.target.getAttribute('data-word');
                speakWord(word);
            }
        });

    </script>
    <script src="script.js"></script>
</body>

</html>